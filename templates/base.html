<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <title>{% block title %}{% endblock title %} Learner's Academy</title>

    <link rel="shortcut icon" href="/static/img/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="/static/css/animate.min.css"/>
    <link rel="stylesheet" href="/static/bootstrap-5.2.3-dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/static/css/styles_fll.css"/>
    <link rel="stylesheet" href="/static/css/styles.css"/>
    <link rel="stylesheet" href="/static/css/compof.css"/>
    <link rel="stylesheet" href="/static/css/responsive.css"/>
    <link rel="manifest" href="/static/js/manifest.json">

    {% block css %}{% endblock css %}

    <script defer src="/static/bootstrap-5.2.3-dist/js/bootstrap.min.js"></script>
    <!--Font Awesome-->
    <link rel="stylesheet" href="/static/fontawesome-free-6.4.0-web/fontawesome-free-6.4.0-web/css/all.min.css">
    <script src="/static/js/web/jquery-3.6.3.min.js"></script>
    <script src="https://cdn.tiny.cloud/1/xrzr1fiseqxgu74n7p5fime2sdkmnlbewzhtz1ubnainccc9/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
    <!--script>
        const userlog = new XMLHttpRequest();
        userlog.open("GET","{% url 'userlog' %}", true);
        userlog.send();
    </script-->
    
    {% block head %}{% endblock head %}
</head>
<body>
    {% include 'static/css/styles.html' %}
    <div id="top"></div>

    {% block body %}{% endblock body %}

    <!-- Loading square for squar.red network -->
    <div class="loader-wrapper">
        <span class="loader"><span class="loader-inner"></span></span>
    </div>
    <!-- LOADING ANIMATION -->
    <script>
        $(window).on("load", function() {
            $(".loader-wrapper").fadeOut("slow");
        });
    </script>

    <script src="/static/js/sw.js"></script>
    <script>
        // Hide Header on on scroll down
        var didScroll;
        var lastScrollTop = 0;
        var delta = 5;
        var navbarHeight = document.getElementsByTagName('theader')[0].getBoundingClientRect().height //$('theader').outerHeight();

        window.addEventListener("scroll", function(event){
            didScroll = true;
        });
        //$(window).scroll(function(event){
        //    didScroll = true;
        //});

        setInterval(function() {
            if (didScroll) {
                hasScrolled();
                didScroll = false;
            }
        }, 250);

        function hasScrolled() {
            var st = $(this).scrollTop();
            
            // Make sure they scroll more than delta
            if(Math.abs(lastScrollTop - st) <= delta)
                return;
            
            // If they scrolled down and are past the navbar, add class .nav-up.
            // This is necessary so you never see what is "behind" the navbar.
            if (st > lastScrollTop && st > navbarHeight){
                // Scroll Down
                $('theader').removeClass('nav-down').addClass('nav-up');
            } else {
                // Scroll Up
                if(st + $(window).height() < $(document).height()) {
                    $('theader').removeClass('nav-up').addClass('nav-down');
                }
            }

            lastScrollTop = st;
        }
    </script>
    
    <script>// Connection Online / Offline Status
        function updateOnlineStatus(){
            let content = document.getElementById("content");
            let textContent = `Your network status is ${navigator.onLine ? "Online" : "Offline"} `;
            //content.textContent = textContent;
          }
        document.addEventListener("DOMContentLoaded", function () {
        updateOnlineStatus();
        window.addEventListener('online',  updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        });
    </script>

    <script>
        //localStorage.setItem("name", "John Doe");
        //localStorage.getItem("name");

        //sessionStorage.setItem("name", "John Doe");
        //sessionStorage.getItem("name");

    </script>
    
    <script src="/static/bootstrap-5.2.3-dist/js/bootstrap.bundle.min.js" defer></script>

    <script>
        window.onload = function() {
            document.querySelectorAll('[data-bs-toggle="popover"]').forEach(el => new bootstrap.Popover(el))
        }
    </script>

    {% if request.user.is_authenticated %}
    <script>
        setInterval(updls, 10000);
        function updls() {
            const userlog = new XMLHttpRequest();
            userlog.open("GET","{% url 'userlog' %}?user={{request.user.pk}}", true);
            userlog.send();
        };
    </script>
    {% endif %}
</body>
</html>